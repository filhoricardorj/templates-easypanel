{
  "name":"N8N Distribuido",
  "services": [
    {
      "type": "postgres",
      "data": {
        "projectName": "$(PROJECT_NAME)",
        "databaseName": "n8n",
        "serviceName": "db",
        "image": "pgvector/pgvector:pg17-trixie",
        "password": "__ALTERAR__"
      }
    },
    {
      "type": "redis",
      "data": {
        "projectName": "$(PROJECT_NAME)",
        "serviceName": "redis",
        "image": "redis:7",
        "password": "__ALTERAR__"
      }
    },
    {
      "type": "app",
      "data": {
        "projectName": "$(PROJECT_NAME)",
        "serviceName": "editor",
        "source": {
          "type": "image",
          "image": "n8nio/n8n:stable"
        },
        "deploy": {
          "replicas": 1,
          "command": null,
          "zeroDowntime": true
        },
        "domains": [
          {
            "host": "$(EASYPANEL_DOMAIN)",
            "https": true,
            "port": 5678,
            "path": "/",
            "middlewares": [],
            "certificateResolver": "",
            "wildcard": false,
            "internalProtocol": "http"
          }
        ],
        "mounts": [
          {
            "type": "volume",
            "name": "editor-data",
            "mountPath": "/home/node/.n8n"
          }
        ]
      }
    },
    {
      "type": "app",
      "data": {
        "projectName": "$(PROJECT_NAME)",
        "serviceName": "webhooks",
        "source": {
          "type": "image",
          "image": "n8nio/n8n:stable"
        },
        "deploy": {
          "replicas": 1,
          "command": "n8n webhook",
          "zeroDowntime": true
        },
        "domains": [
          {
            "host": "$(EASYPANEL_DOMAIN)",
            "https": true,
            "port": 5678,
            "path": "/webhook/",
            "middlewares": [],
            "certificateResolver": "",
            "wildcard": false,
            "internalProtocol": "http"
          },
          {
            "host": "$(EASYPANEL_DOMAIN)",
            "https": true,
            "port": 5678,
            "path": "/webhook-waiting/",
            "middlewares": [],
            "certificateResolver": "",
            "wildcard": false,
            "internalProtocol": "http"
          }
        ],
        "mounts": [
          {
            "type": "volume",
            "name": "webhooks-data",
            "mountPath": "/home/node/.n8n"
          }
        ]
      }
    },
    {
      "type": "app",
      "data": {
        "projectName": "$(PROJECT_NAME)",
        "serviceName": "worker-1",
        "source": {
          "type": "image",
          "image": "n8nio/n8n:stable"
        },
        "env": "N8N_RUNNERS_AUTH_TOKEN=__ALTERAR__",
        "deploy": {
          "replicas": 1,
          "command": "n8n worker",
          "zeroDowntime": true
        },
        "mounts": [
          {
            "type": "volume",
            "name": "worker-1-data",
            "mountPath": "/home/node/.n8n"
          }
        ]
      }
    },
    {
      "type": "app",
      "data": {
        "projectName": "$(PROJECT_NAME)",
        "serviceName": "worker-1-runner",
        "source": {
          "type": "image",
          "image": "n8nio/runners:stable"
        },
        "env": "N8N_RUNNERS_AUTH_TOKEN=__ALTERAR__\nN8N_RUNNERS_TASK_BROKER_URI=http://worker-1:5679",
        "deploy": {
          "replicas": 1,
          "command": null,
          "zeroDowntime": true
        }
      }
    }
  ]
}